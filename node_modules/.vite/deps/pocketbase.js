// node_modules/pocketbase/dist/pocketbase.es.mjs
var t = function(e2, n2) {
  return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t2, e3) {
    t2.__proto__ = e3;
  } || function(t2, e3) {
    for (var n3 in e3)
      Object.prototype.hasOwnProperty.call(e3, n3) && (t2[n3] = e3[n3]);
  }, t(e2, n2);
};
function e(e2, n2) {
  if ("function" != typeof n2 && null !== n2)
    throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
  function i2() {
    this.constructor = e2;
  }
  t(e2, n2), e2.prototype = null === n2 ? Object.create(n2) : (i2.prototype = n2.prototype, new i2());
}
var n = function() {
  return n = Object.assign || function(t2) {
    for (var e2, n2 = 1, i2 = arguments.length; n2 < i2; n2++)
      for (var o2 in e2 = arguments[n2])
        Object.prototype.hasOwnProperty.call(e2, o2) && (t2[o2] = e2[o2]);
    return t2;
  }, n.apply(this, arguments);
};
function i(t2, e2, n2, i2) {
  return new (n2 || (n2 = Promise))(function(o2, r2) {
    function s2(t3) {
      try {
        u2(i2.next(t3));
      } catch (t4) {
        r2(t4);
      }
    }
    function a2(t3) {
      try {
        u2(i2.throw(t3));
      } catch (t4) {
        r2(t4);
      }
    }
    function u2(t3) {
      var e3;
      t3.done ? o2(t3.value) : (e3 = t3.value, e3 instanceof n2 ? e3 : new n2(function(t4) {
        t4(e3);
      })).then(s2, a2);
    }
    u2((i2 = i2.apply(t2, e2 || [])).next());
  });
}
function o(t2, e2) {
  var n2, i2, o2, r2, s2 = { label: 0, sent: function() {
    if (1 & o2[0])
      throw o2[1];
    return o2[1];
  }, trys: [], ops: [] };
  return r2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (r2[Symbol.iterator] = function() {
    return this;
  }), r2;
  function a2(r3) {
    return function(a3) {
      return function(r4) {
        if (n2)
          throw new TypeError("Generator is already executing.");
        for (; s2; )
          try {
            if (n2 = 1, i2 && (o2 = 2 & r4[0] ? i2.return : r4[0] ? i2.throw || ((o2 = i2.return) && o2.call(i2), 0) : i2.next) && !(o2 = o2.call(i2, r4[1])).done)
              return o2;
            switch (i2 = 0, o2 && (r4 = [2 & r4[0], o2.value]), r4[0]) {
              case 0:
              case 1:
                o2 = r4;
                break;
              case 4:
                return s2.label++, { value: r4[1], done: false };
              case 5:
                s2.label++, i2 = r4[1], r4 = [0];
                continue;
              case 7:
                r4 = s2.ops.pop(), s2.trys.pop();
                continue;
              default:
                if (!(o2 = s2.trys, (o2 = o2.length > 0 && o2[o2.length - 1]) || 6 !== r4[0] && 2 !== r4[0])) {
                  s2 = 0;
                  continue;
                }
                if (3 === r4[0] && (!o2 || r4[1] > o2[0] && r4[1] < o2[3])) {
                  s2.label = r4[1];
                  break;
                }
                if (6 === r4[0] && s2.label < o2[1]) {
                  s2.label = o2[1], o2 = r4;
                  break;
                }
                if (o2 && s2.label < o2[2]) {
                  s2.label = o2[2], s2.ops.push(r4);
                  break;
                }
                o2[2] && s2.ops.pop(), s2.trys.pop();
                continue;
            }
            r4 = e2.call(t2, s2);
          } catch (t3) {
            r4 = [6, t3], i2 = 0;
          } finally {
            n2 = o2 = 0;
          }
        if (5 & r4[0])
          throw r4[1];
        return { value: r4[0] ? r4[1] : void 0, done: true };
      }([r3, a3]);
    };
  }
}
var r;
var s = function(t2) {
  function i2(e2) {
    var n2, o2 = this;
    return (o2 = t2.call(this, "ClientResponseError") || this).url = "", o2.status = 0, o2.data = {}, o2.isAbort = false, o2.originalError = null, Object.setPrototypeOf(o2, i2.prototype), e2 instanceof i2 || (o2.originalError = e2), null !== e2 && "object" == typeof e2 && (o2.url = "string" == typeof e2.url ? e2.url : "", o2.status = "number" == typeof e2.status ? e2.status : 0, o2.data = null !== e2.data && "object" == typeof e2.data ? e2.data : {}), "undefined" != typeof DOMException && e2 instanceof DOMException && (o2.isAbort = true), o2.name = "ClientResponseError " + o2.status, o2.message = (null === (n2 = o2.data) || void 0 === n2 ? void 0 : n2.message) || "Something went wrong while processing your request.", o2;
  }
  return e(i2, t2), i2.prototype.toJSON = function() {
    return n({}, this);
  }, i2;
}(Error);
var a = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;
function u(t2, e2, n2) {
  var i2 = Object.assign({}, n2 || {}), o2 = i2.encode || c;
  if (!a.test(t2))
    throw new TypeError("argument name is invalid");
  var r2 = o2(e2);
  if (r2 && !a.test(r2))
    throw new TypeError("argument val is invalid");
  var s2 = t2 + "=" + r2;
  if (null != i2.maxAge) {
    var u2 = i2.maxAge - 0;
    if (isNaN(u2) || !isFinite(u2))
      throw new TypeError("option maxAge is invalid");
    s2 += "; Max-Age=" + Math.floor(u2);
  }
  if (i2.domain) {
    if (!a.test(i2.domain))
      throw new TypeError("option domain is invalid");
    s2 += "; Domain=" + i2.domain;
  }
  if (i2.path) {
    if (!a.test(i2.path))
      throw new TypeError("option path is invalid");
    s2 += "; Path=" + i2.path;
  }
  if (i2.expires) {
    if (!function(t3) {
      return "[object Date]" === Object.prototype.toString.call(t3) || t3 instanceof Date;
    }(i2.expires) || isNaN(i2.expires.valueOf()))
      throw new TypeError("option expires is invalid");
    s2 += "; Expires=" + i2.expires.toUTCString();
  }
  if (i2.httpOnly && (s2 += "; HttpOnly"), i2.secure && (s2 += "; Secure"), i2.priority)
    switch ("string" == typeof i2.priority ? i2.priority.toLowerCase() : i2.priority) {
      case "low":
        s2 += "; Priority=Low";
        break;
      case "medium":
        s2 += "; Priority=Medium";
        break;
      case "high":
        s2 += "; Priority=High";
        break;
      default:
        throw new TypeError("option priority is invalid");
    }
  if (i2.sameSite)
    switch ("string" == typeof i2.sameSite ? i2.sameSite.toLowerCase() : i2.sameSite) {
      case true:
        s2 += "; SameSite=Strict";
        break;
      case "lax":
        s2 += "; SameSite=Lax";
        break;
      case "strict":
        s2 += "; SameSite=Strict";
        break;
      case "none":
        s2 += "; SameSite=None";
        break;
      default:
        throw new TypeError("option sameSite is invalid");
    }
  return s2;
}
function l(t2) {
  return -1 !== t2.indexOf("%") ? decodeURIComponent(t2) : t2;
}
function c(t2) {
  return encodeURIComponent(t2);
}
function d(t2) {
  if (t2)
    try {
      var e2 = decodeURIComponent(r(t2.split(".")[1]).split("").map(function(t3) {
        return "%" + ("00" + t3.charCodeAt(0).toString(16)).slice(-2);
      }).join(""));
      return JSON.parse(e2) || {};
    } catch (t3) {
    }
  return {};
}
r = "function" == typeof atob ? atob : function(t2) {
  return Buffer.from(t2, "base64").toString("binary");
};
var h = function() {
  function t2(t3) {
    void 0 === t3 && (t3 = {}), this.load(t3 || {});
  }
  return t2.prototype.load = function(t3) {
    this.id = void 0 !== t3.id ? t3.id : "", this.created = void 0 !== t3.created ? t3.created : "", this.updated = void 0 !== t3.updated ? t3.updated : "";
  }, Object.defineProperty(t2.prototype, "isNew", { get: function() {
    return !this.id || "00000000-0000-0000-0000-000000000000" === this.id;
  }, enumerable: false, configurable: true }), t2.prototype.clone = function() {
    return new this.constructor(JSON.parse(JSON.stringify(this)));
  }, t2.prototype.export = function() {
    return Object.assign({}, this);
  }, t2;
}();
var p = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2);
    for (var n3 = 0, i2 = Object.entries(e2); n3 < i2.length; n3++) {
      var o2 = i2[n3], r2 = o2[0], s2 = o2[1];
      this[r2] = s2;
    }
    this["@collectionId"] = void 0 !== e2["@collectionId"] ? e2["@collectionId"] : "", this["@collectionName"] = void 0 !== e2["@collectionName"] ? e2["@collectionName"] : "", this["@expand"] = void 0 !== e2["@expand"] ? e2["@expand"] : {};
  }, n2;
}(h);
var f = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.email = "string" == typeof e2.email ? e2.email : "", this.verified = !!e2.verified, this.lastResetSentAt = "string" == typeof e2.lastResetSentAt ? e2.lastResetSentAt : "", this.lastVerificationSentAt = "string" == typeof e2.lastVerificationSentAt ? e2.lastVerificationSentAt : "", this.profile = e2.profile ? new p(e2.profile) : null;
  }, n2;
}(h);
var v = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.avatar = "number" == typeof e2.avatar ? e2.avatar : 0, this.email = "string" == typeof e2.email ? e2.email : "", this.lastResetSentAt = "string" == typeof e2.lastResetSentAt ? e2.lastResetSentAt : "";
  }, n2;
}(h);
var y = function() {
  function t2() {
    this.baseToken = "", this.baseModel = null, this._onChangeCallbacks = [];
  }
  return Object.defineProperty(t2.prototype, "token", { get: function() {
    return this.baseToken;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "model", { get: function() {
    return this.baseModel;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "isValid", { get: function() {
    return !function(t3, e2) {
      void 0 === e2 && (e2 = 0);
      var n2 = d(t3);
      return !(Object.keys(n2).length > 0 && (!n2.exp || n2.exp - e2 > Date.now() / 1e3));
    }(this.token);
  }, enumerable: false, configurable: true }), t2.prototype.save = function(t3, e2) {
    this.baseToken = t3 || "", this.baseModel = null !== e2 && "object" == typeof e2 ? "undefined" !== (null == e2 ? void 0 : e2.verified) ? new f(e2) : new v(e2) : null, this.triggerChange();
  }, t2.prototype.clear = function() {
    this.baseToken = "", this.baseModel = null, this.triggerChange();
  }, t2.prototype.loadFromCookie = function(t3, e2) {
    void 0 === e2 && (e2 = "pb_auth");
    var n2 = function(t4, e3) {
      var n3 = {};
      if ("string" != typeof t4)
        return n3;
      for (var i3 = Object.assign({}, e3 || {}).decode || l, o2 = 0; o2 < t4.length; ) {
        var r2 = t4.indexOf("=", o2);
        if (-1 === r2)
          break;
        var s2 = t4.indexOf(";", o2);
        if (-1 === s2)
          s2 = t4.length;
        else if (s2 < r2) {
          o2 = t4.lastIndexOf(";", r2 - 1) + 1;
          continue;
        }
        var a2 = t4.slice(o2, r2).trim();
        if (void 0 === n3[a2]) {
          var u2 = t4.slice(r2 + 1, s2).trim();
          34 === u2.charCodeAt(0) && (u2 = u2.slice(1, -1));
          try {
            n3[a2] = i3(u2);
          } catch (t5) {
            n3[a2] = u2;
          }
        }
        o2 = s2 + 1;
      }
      return n3;
    }(t3 || "")[e2] || "", i2 = {};
    try {
      (null === typeof (i2 = JSON.parse(n2)) || "object" != typeof i2 || Array.isArray(i2)) && (i2 = {});
    } catch (t4) {
    }
    this.save(i2.token || "", i2.model || {});
  }, t2.prototype.exportToCookie = function(t3, e2) {
    var n2, i2, o2;
    void 0 === e2 && (e2 = "pb_auth");
    var r2 = { secure: true, sameSite: true, httpOnly: true, path: "/" }, s2 = d(this.token);
    (null == s2 ? void 0 : s2.exp) ? r2.expires = new Date(1e3 * s2.exp) : r2.expires = new Date("1970-01-01"), t3 = Object.assign({}, r2, t3);
    var a2 = { token: this.token, model: (null === (n2 = this.model) || void 0 === n2 ? void 0 : n2.export()) || null }, l2 = u(e2, JSON.stringify(a2), t3), c2 = "undefined" != typeof Blob ? new Blob([l2]).size : l2.length;
    return a2.model && c2 > 4096 && (a2.model = { id: null === (i2 = null == a2 ? void 0 : a2.model) || void 0 === i2 ? void 0 : i2.id, email: null === (o2 = null == a2 ? void 0 : a2.model) || void 0 === o2 ? void 0 : o2.email }, this.model instanceof f && (a2.model.verified = this.model.verified), l2 = u(e2, JSON.stringify(a2), t3)), l2;
  }, t2.prototype.onChange = function(t3) {
    var e2 = this;
    return this._onChangeCallbacks.push(t3), function() {
      for (var n2 = e2._onChangeCallbacks.length - 1; n2 >= 0; n2--)
        if (e2._onChangeCallbacks[n2] == t3)
          return delete e2._onChangeCallbacks[n2], void e2._onChangeCallbacks.splice(n2, 1);
    };
  }, t2.prototype.triggerChange = function() {
    for (var t3 = 0, e2 = this._onChangeCallbacks; t3 < e2.length; t3++) {
      var n2 = e2[t3];
      n2 && n2(this.token, this.model);
    }
  }, t2;
}();
var m = function(t2) {
  function n2(e2) {
    void 0 === e2 && (e2 = "pocketbase_auth");
    var n3 = t2.call(this) || this;
    return n3.storageFallback = {}, n3.storageKey = e2, n3;
  }
  return e(n2, t2), Object.defineProperty(n2.prototype, "token", { get: function() {
    return (this._storageGet(this.storageKey) || {}).token || "";
  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, "model", { get: function() {
    var t3, e2 = this._storageGet(this.storageKey) || {};
    return null === e2 || "object" != typeof e2 || null === e2.model || "object" != typeof e2.model ? null : void 0 !== (null === (t3 = e2.model) || void 0 === t3 ? void 0 : t3.verified) ? new f(e2.model) : new v(e2.model);
  }, enumerable: false, configurable: true }), n2.prototype.save = function(e2, n3) {
    this._storageSet(this.storageKey, { token: e2, model: n3 }), t2.prototype.save.call(this, e2, n3);
  }, n2.prototype.clear = function() {
    this._storageRemove(this.storageKey), t2.prototype.clear.call(this);
  }, n2.prototype._storageGet = function(t3) {
    var e2;
    if ("undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {
      var n3 = (null === (e2 = null === window || void 0 === window ? void 0 : window.localStorage) || void 0 === e2 ? void 0 : e2.getItem(t3)) || "";
      try {
        return JSON.parse(n3);
      } catch (t4) {
        return n3;
      }
    }
    return this.storageFallback[t3];
  }, n2.prototype._storageSet = function(t3, e2) {
    var n3;
    if ("undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {
      var i2 = e2;
      "string" != typeof e2 && (i2 = JSON.stringify(e2)), null === (n3 = null === window || void 0 === window ? void 0 : window.localStorage) || void 0 === n3 || n3.setItem(t3, i2);
    } else
      this.storageFallback[t3] = e2;
  }, n2.prototype._storageRemove = function(t3) {
    var e2;
    "undefined" != typeof window && (null === (e2 = null === window || void 0 === window ? void 0 : window.localStorage) || void 0 === e2 || e2.removeItem(t3)), delete this.storageFallback[t3];
  }, n2;
}(y);
var b = function(t2) {
  this.client = t2;
};
var g = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getAll = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/settings", { method: "GET", params: t3 }).then(function(t4) {
      return t4 || {};
    });
  }, n2.prototype.update = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send("/api/settings", { method: "PATCH", params: e2, body: t3 }).then(function(t4) {
      return t4 || {};
    });
  }, n2.prototype.testS3 = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/settings/test/s3", { method: "POST", params: t3 }).then(function() {
      return true;
    });
  }, n2.prototype.testEmail = function(t3, e2, n3) {
    void 0 === n3 && (n3 = {});
    var i2 = { email: t3, template: e2 };
    return this.client.send("/api/settings/test/email", { method: "POST", params: n3, body: i2 }).then(function() {
      return true;
    });
  }, n2;
}(b);
var w = function(t2, e2, n2, i2, o2) {
  this.page = t2 > 0 ? t2 : 1, this.perPage = e2 >= 0 ? e2 : 0, this.totalItems = n2 >= 0 ? n2 : 0, this.totalPages = i2 >= 0 ? i2 : 0, this.items = o2 || [];
};
var S = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype._getFullList = function(t3, e2, n3) {
    var r2 = this;
    void 0 === e2 && (e2 = 100), void 0 === n3 && (n3 = {});
    var s2 = [], a2 = function(u2) {
      return i(r2, void 0, void 0, function() {
        return o(this, function(i2) {
          return [2, this._getList(t3, u2, e2, n3).then(function(t4) {
            var e3 = t4, n4 = e3.items, i3 = e3.totalItems;
            return s2 = s2.concat(n4), n4.length && i3 > s2.length ? a2(u2 + 1) : s2;
          })];
        });
      });
    };
    return a2(1);
  }, n2.prototype._getList = function(t3, e2, n3, i2) {
    var o2 = this;
    return void 0 === e2 && (e2 = 1), void 0 === n3 && (n3 = 30), void 0 === i2 && (i2 = {}), i2 = Object.assign({ page: e2, perPage: n3 }, i2), this.client.send(t3, { method: "GET", params: i2 }).then(function(t4) {
      var e3 = [];
      if (null == t4 ? void 0 : t4.items) {
        t4.items = t4.items || [];
        for (var n4 = 0, i3 = t4.items; n4 < i3.length; n4++) {
          var r2 = i3[n4];
          e3.push(o2.decode(r2));
        }
      }
      return new w((null == t4 ? void 0 : t4.page) || 1, (null == t4 ? void 0 : t4.perPage) || 0, (null == t4 ? void 0 : t4.totalItems) || 0, (null == t4 ? void 0 : t4.totalPages) || 0, e3);
    });
  }, n2.prototype._getOne = function(t3, e2, n3) {
    var i2 = this;
    return void 0 === n3 && (n3 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "GET", params: n3 }).then(function(t4) {
      return i2.decode(t4);
    });
  }, n2.prototype._create = function(t3, e2, n3) {
    var i2 = this;
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), this.client.send(t3, { method: "POST", params: n3, body: e2 }).then(function(t4) {
      return i2.decode(t4);
    });
  }, n2.prototype._update = function(t3, e2, n3, i2) {
    var o2 = this;
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "PATCH", params: i2, body: n3 }).then(function(t4) {
      return o2.decode(t4);
    });
  }, n2.prototype._delete = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "DELETE", params: n3 }).then(function() {
      return true;
    });
  }, n2;
}(b);
var O = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getFullList = function(t3, e2) {
    return void 0 === t3 && (t3 = 100), void 0 === e2 && (e2 = {}), this._getFullList(this.baseCrudPath(), t3, e2);
  }, n2.prototype.getList = function(t3, e2, n3) {
    return void 0 === t3 && (t3 = 1), void 0 === e2 && (e2 = 30), void 0 === n3 && (n3 = {}), this._getList(this.baseCrudPath(), t3, e2, n3);
  }, n2.prototype.getOne = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this._getOne(this.baseCrudPath(), t3, e2);
  }, n2.prototype.create = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this._create(this.baseCrudPath(), t3, e2);
  }, n2.prototype.update = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), this._update(this.baseCrudPath(), t3, e2, n3);
  }, n2.prototype.delete = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this._delete(this.baseCrudPath(), t3, e2);
  }, n2;
}(S);
var C = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new v(t3);
  }, n2.prototype.baseCrudPath = function() {
    return "/api/admins";
  }, n2.prototype.authResponse = function(t3) {
    var e2 = this.decode((null == t3 ? void 0 : t3.admin) || {});
    return (null == t3 ? void 0 : t3.token) && (null == t3 ? void 0 : t3.admin) && this.client.authStore.save(t3.token, e2), Object.assign({}, t3, { token: (null == t3 ? void 0 : t3.token) || "", admin: e2 });
  }, n2.prototype.authViaEmail = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ email: t3, password: e2 }, n3), this.client.send(this.baseCrudPath() + "/auth-via-email", { method: "POST", params: i2, body: n3, headers: { Authorization: "" } }).then(this.authResponse.bind(this));
  }, n2.prototype.refresh = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send(this.baseCrudPath() + "/refresh", { method: "POST", params: e2, body: t3 }).then(this.authResponse.bind(this));
  }, n2.prototype.requestPasswordReset = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCrudPath() + "/request-password-reset", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmPasswordReset = function(t3, e2, n3, i2, o2) {
    return void 0 === i2 && (i2 = {}), void 0 === o2 && (o2 = {}), i2 = Object.assign({ token: t3, password: e2, passwordConfirm: n3 }, i2), this.client.send(this.baseCrudPath() + "/confirm-password-reset", { method: "POST", params: o2, body: i2 }).then(this.authResponse.bind(this));
  }, n2;
}(O);
var P = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.userId = "string" == typeof e2.userId ? e2.userId : "", this.provider = "string" == typeof e2.provider ? e2.provider : "", this.providerId = "string" == typeof e2.providerId ? e2.providerId : "";
  }, n2;
}(h);
var j = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new f(t3);
  }, n2.prototype.baseCrudPath = function() {
    return "/api/users";
  }, n2.prototype.authResponse = function(t3) {
    var e2 = this.decode((null == t3 ? void 0 : t3.user) || {});
    return (null == t3 ? void 0 : t3.token) && (null == t3 ? void 0 : t3.user) && this.client.authStore.save(t3.token, e2), Object.assign({}, t3, { token: (null == t3 ? void 0 : t3.token) || "", user: e2 });
  }, n2.prototype.listAuthMethods = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send(this.baseCrudPath() + "/auth-methods", { method: "GET", params: t3 }).then(function(t4) {
      return Object.assign({}, t4, { emailPassword: !!(null == t4 ? void 0 : t4.emailPassword), authProviders: Array.isArray(null == t4 ? void 0 : t4.authProviders) ? null == t4 ? void 0 : t4.authProviders : [] });
    });
  }, n2.prototype.authViaEmail = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ email: t3, password: e2 }, n3), this.client.send(this.baseCrudPath() + "/auth-via-email", { method: "POST", params: i2, body: n3, headers: { Authorization: "" } }).then(this.authResponse.bind(this));
  }, n2.prototype.authViaOAuth2 = function(t3, e2, n3, i2, o2, r2) {
    return void 0 === o2 && (o2 = {}), void 0 === r2 && (r2 = {}), o2 = Object.assign({ provider: t3, code: e2, codeVerifier: n3, redirectUrl: i2 }, o2), this.client.send(this.baseCrudPath() + "/auth-via-oauth2", { method: "POST", params: r2, body: o2, headers: { Authorization: "" } }).then(this.authResponse.bind(this));
  }, n2.prototype.refresh = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send(this.baseCrudPath() + "/refresh", { method: "POST", params: e2, body: t3 }).then(this.authResponse.bind(this));
  }, n2.prototype.requestPasswordReset = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCrudPath() + "/request-password-reset", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmPasswordReset = function(t3, e2, n3, i2, o2) {
    return void 0 === i2 && (i2 = {}), void 0 === o2 && (o2 = {}), i2 = Object.assign({ token: t3, password: e2, passwordConfirm: n3 }, i2), this.client.send(this.baseCrudPath() + "/confirm-password-reset", { method: "POST", params: o2, body: i2 }).then(this.authResponse.bind(this));
  }, n2.prototype.requestVerification = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCrudPath() + "/request-verification", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmVerification = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ token: t3 }, e2), this.client.send(this.baseCrudPath() + "/confirm-verification", { method: "POST", params: n3, body: e2 }).then(this.authResponse.bind(this));
  }, n2.prototype.requestEmailChange = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ newEmail: t3 }, e2), this.client.send(this.baseCrudPath() + "/request-email-change", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmEmailChange = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ token: t3, password: e2 }, n3), this.client.send(this.baseCrudPath() + "/confirm-email-change", { method: "POST", params: i2, body: n3 }).then(this.authResponse.bind(this));
  }, n2.prototype.listExternalAuths = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this.client.send(this.baseCrudPath() + "/" + encodeURIComponent(t3) + "/external-auths", { method: "GET", params: e2 }).then(function(t4) {
      var e3 = [];
      if (Array.isArray(t4))
        for (var n3 = 0, i2 = t4; n3 < i2.length; n3++) {
          var o2 = i2[n3];
          e3.push(new P(o2));
        }
      return e3;
    });
  }, n2.prototype.unlinkExternalAuth = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this.client.send(this.baseCrudPath() + "/" + encodeURIComponent(t3) + "/external-auths/" + encodeURIComponent(e2), { method: "DELETE", params: n3 }).then(function() {
      return true;
    });
  }, n2;
}(O);
var R = function() {
  function t2(t3) {
    void 0 === t3 && (t3 = {}), this.load(t3 || {});
  }
  return t2.prototype.load = function(t3) {
    this.id = void 0 !== t3.id ? t3.id : "", this.name = void 0 !== t3.name ? t3.name : "", this.type = void 0 !== t3.type ? t3.type : "text", this.system = !!t3.system, this.required = !!t3.required, this.unique = !!t3.unique, this.options = "object" == typeof t3.options && null !== t3.options ? t3.options : {};
  }, t2;
}();
var k = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.name = "string" == typeof e2.name ? e2.name : "", this.system = !!e2.system, this.listRule = "string" == typeof e2.listRule ? e2.listRule : null, this.viewRule = "string" == typeof e2.viewRule ? e2.viewRule : null, this.createRule = "string" == typeof e2.createRule ? e2.createRule : null, this.updateRule = "string" == typeof e2.updateRule ? e2.updateRule : null, this.deleteRule = "string" == typeof e2.deleteRule ? e2.deleteRule : null, e2.schema = Array.isArray(e2.schema) ? e2.schema : [], this.schema = [];
    for (var n3 = 0, i2 = e2.schema; n3 < i2.length; n3++) {
      var o2 = i2[n3];
      this.schema.push(new R(o2));
    }
  }, n2;
}(h);
var E = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new k(t3);
  }, n2.prototype.baseCrudPath = function() {
    return "/api/collections";
  }, n2.prototype.import = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = false), void 0 === n3 && (n3 = {}), i(this, void 0, void 0, function() {
      return o(this, function(i2) {
        return [2, this.client.send(this.baseCrudPath() + "/import", { method: "PUT", params: n3, body: { collections: t3, deleteMissing: e2 } }).then(function() {
          return true;
        })];
      });
    });
  }, n2;
}(O);
var T = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new p(t3);
  }, n2.prototype.baseCrudPath = function(t3) {
    return "/api/collections/" + encodeURIComponent(t3) + "/records";
  }, n2.prototype.getFileUrl = function(t3, e2, n3) {
    void 0 === n3 && (n3 = {});
    var i2 = [];
    i2.push(this.client.baseUrl.replace(/\/+$/gm, "")), i2.push("api"), i2.push("files"), i2.push(t3["@collectionId"]), i2.push(t3.id), i2.push(e2);
    var o2 = i2.join("/");
    if (Object.keys(n3).length) {
      var r2 = new URLSearchParams(n3);
      o2 += (o2.includes("?") ? "&" : "?") + r2;
    }
    return o2;
  }, n2;
}(function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getFullList = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = 100), void 0 === n3 && (n3 = {}), this._getFullList(this.baseCrudPath(t3), e2, n3);
  }, n2.prototype.getList = function(t3, e2, n3, i2) {
    return void 0 === e2 && (e2 = 1), void 0 === n3 && (n3 = 30), void 0 === i2 && (i2 = {}), this._getList(this.baseCrudPath(t3), e2, n3, i2);
  }, n2.prototype.getOne = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this._getOne(this.baseCrudPath(t3), e2, n3);
  }, n2.prototype.create = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), this._create(this.baseCrudPath(t3), e2, n3);
  }, n2.prototype.update = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), this._update(this.baseCrudPath(t3), e2, n3, i2);
  }, n2.prototype.delete = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this._delete(this.baseCrudPath(t3), e2, n3);
  }, n2;
}(S));
var I = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), e2.remoteIp = e2.remoteIp || e2.ip, this.url = "string" == typeof e2.url ? e2.url : "", this.method = "string" == typeof e2.method ? e2.method : "GET", this.status = "number" == typeof e2.status ? e2.status : 200, this.auth = "string" == typeof e2.auth ? e2.auth : "guest", this.remoteIp = "string" == typeof e2.remoteIp ? e2.remoteIp : "", this.userIp = "string" == typeof e2.userIp ? e2.userIp : "", this.referer = "string" == typeof e2.referer ? e2.referer : "", this.userAgent = "string" == typeof e2.userAgent ? e2.userAgent : "", this.meta = "object" == typeof e2.meta && null !== e2.meta ? e2.meta : {};
  }, n2;
}(h);
var A = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getRequestsList = function(t3, e2, n3) {
    return void 0 === t3 && (t3 = 1), void 0 === e2 && (e2 = 30), void 0 === n3 && (n3 = {}), n3 = Object.assign({ page: t3, perPage: e2 }, n3), this.client.send("/api/logs/requests", { method: "GET", params: n3 }).then(function(t4) {
      var e3 = [];
      if (null == t4 ? void 0 : t4.items) {
        t4.items = (null == t4 ? void 0 : t4.items) || [];
        for (var n4 = 0, i2 = t4.items; n4 < i2.length; n4++) {
          var o2 = i2[n4];
          e3.push(new I(o2));
        }
      }
      return new w((null == t4 ? void 0 : t4.page) || 1, (null == t4 ? void 0 : t4.perPage) || 0, (null == t4 ? void 0 : t4.totalItems) || 0, (null == t4 ? void 0 : t4.totalPages) || 0, e3);
    });
  }, n2.prototype.getRequest = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this.client.send("/api/logs/requests/" + encodeURIComponent(t3), { method: "GET", params: e2 }).then(function(t4) {
      return new I(t4);
    });
  }, n2.prototype.getRequestsStats = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/logs/requests/stats", { method: "GET", params: t3 }).then(function(t4) {
      return t4;
    });
  }, n2;
}(b);
var _ = function(t2) {
  function n2() {
    var e2 = null !== t2 && t2.apply(this, arguments) || this;
    return e2.clientId = "", e2.eventSource = null, e2.subscriptions = {}, e2;
  }
  return e(n2, t2), n2.prototype.subscribe = function(t3, e2) {
    var n3;
    return i(this, void 0, void 0, function() {
      return o(this, function(i2) {
        switch (i2.label) {
          case 0:
            if (!t3)
              throw new Error("subscription must be set.");
            return this.subscriptions[t3] && (null === (n3 = this.eventSource) || void 0 === n3 || n3.removeEventListener(t3, this.subscriptions[t3])), this.subscriptions[t3] = function(t4) {
              var n4, i3 = t4;
              try {
                n4 = JSON.parse(null == i3 ? void 0 : i3.data);
              } catch (t5) {
              }
              e2(n4 || {});
            }, this.eventSource ? [3, 1] : (this.connect(), [3, 3]);
          case 1:
            return this.clientId ? [4, this.submitSubscriptions()] : [3, 3];
          case 2:
            i2.sent(), i2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n2.prototype.unsubscribe = function(t3) {
    var e2;
    return i(this, void 0, void 0, function() {
      return o(this, function(n3) {
        switch (n3.label) {
          case 0:
            if (t3) {
              if (!this.subscriptions[t3])
                return [2];
              null === (e2 = this.eventSource) || void 0 === e2 || e2.removeEventListener(t3, this.subscriptions[t3]), delete this.subscriptions[t3];
            } else
              this.removeSubscriptionListeners(), this.subscriptions = {};
            return this.clientId ? [4, this.submitSubscriptions()] : [3, 2];
          case 1:
            n3.sent(), n3.label = 2;
          case 2:
            return Object.keys(this.subscriptions).length || this.disconnect(), [2];
        }
      });
    });
  }, n2.prototype.submitSubscriptions = function() {
    return i(this, void 0, void 0, function() {
      return o(this, function(t3) {
        return this.addSubscriptionListeners(), [2, this.client.send("/api/realtime", { method: "POST", body: { clientId: this.clientId, subscriptions: Object.keys(this.subscriptions) }, params: { $autoCancel: false } }).then(function() {
          return true;
        })];
      });
    });
  }, n2.prototype.addSubscriptionListeners = function() {
    if (this.eventSource)
      for (var t3 in this.removeSubscriptionListeners(), this.subscriptions)
        this.eventSource.addEventListener(t3, this.subscriptions[t3]);
  }, n2.prototype.removeSubscriptionListeners = function() {
    if (this.eventSource)
      for (var t3 in this.subscriptions)
        this.eventSource.removeEventListener(t3, this.subscriptions[t3]);
  }, n2.prototype.connectHandler = function(t3) {
    var e2 = t3;
    this.clientId = null == e2 ? void 0 : e2.lastEventId, this.submitSubscriptions();
  }, n2.prototype.connect = function() {
    var t3 = this;
    this.disconnect(), this.eventSource = new EventSource(this.client.buildUrl("/api/realtime")), this.eventSource.addEventListener("PB_CONNECT", function(e2) {
      return t3.connectHandler(e2);
    });
  }, n2.prototype.disconnect = function() {
    var t3, e2, n3 = this;
    this.removeSubscriptionListeners(), null === (t3 = this.eventSource) || void 0 === t3 || t3.removeEventListener("PB_CONNECT", function(t4) {
      return n3.connectHandler(t4);
    }), null === (e2 = this.eventSource) || void 0 === e2 || e2.close(), this.eventSource = null, this.clientId = "";
  }, n2;
}(b);
var x = function() {
  function t2(t3, e2, n2) {
    void 0 === t3 && (t3 = "/"), void 0 === e2 && (e2 = "en-US"), this.cancelControllers = {}, this.baseUrl = t3, this.lang = e2, this.authStore = n2 || new m(), this.admins = new C(this), this.users = new j(this), this.records = new T(this), this.collections = new E(this), this.logs = new A(this), this.settings = new g(this), this.realtime = new _(this);
  }
  return Object.defineProperty(t2.prototype, "AuthStore", { get: function() {
    return this.authStore;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Settings", { get: function() {
    return this.settings;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Admins", { get: function() {
    return this.admins;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Users", { get: function() {
    return this.users;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Collections", { get: function() {
    return this.collections;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Records", { get: function() {
    return this.records;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Logs", { get: function() {
    return this.logs;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "Realtime", { get: function() {
    return this.realtime;
  }, enumerable: false, configurable: true }), t2.prototype.cancelRequest = function(t3) {
    return this.cancelControllers[t3] && (this.cancelControllers[t3].abort(), delete this.cancelControllers[t3]), this;
  }, t2.prototype.cancelAllRequests = function() {
    for (var t3 in this.cancelControllers)
      this.cancelControllers[t3].abort();
    return this.cancelControllers = {}, this;
  }, t2.prototype.send = function(t3, e2) {
    var n2, r2, a2, u2, l2, c2, d2, h2, p2;
    return i(this, void 0, void 0, function() {
      var f2, v2, y2, m2, b2, g2, w2 = this;
      return o(this, function(S2) {
        return (f2 = Object.assign({ method: "GET" }, e2)).body && "FormData" !== f2.body.constructor.name && ("string" != typeof f2.body && (f2.body = JSON.stringify(f2.body)), void 0 === (null === (n2 = null == f2 ? void 0 : f2.headers) || void 0 === n2 ? void 0 : n2["Content-Type"]) && (f2.headers = Object.assign({}, f2.headers, { "Content-Type": "application/json" }))), void 0 === (null === (r2 = null == f2 ? void 0 : f2.headers) || void 0 === r2 ? void 0 : r2["Accept-Language"]) && (f2.headers = Object.assign({}, f2.headers, { "Accept-Language": this.lang })), (null === (a2 = this.authStore) || void 0 === a2 ? void 0 : a2.token) && void 0 === (null === (u2 = null == f2 ? void 0 : f2.headers) || void 0 === u2 ? void 0 : u2.Authorization) && (v2 = "Admin", void 0 !== (null === (l2 = this.authStore.model) || void 0 === l2 ? void 0 : l2.verified) && (v2 = "User"), f2.headers = Object.assign({}, f2.headers, { Authorization: v2 + " " + this.authStore.token })), false !== (null === (c2 = f2.params) || void 0 === c2 ? void 0 : c2.$autoCancel) && (y2 = (null === (d2 = f2.params) || void 0 === d2 ? void 0 : d2.$cancelKey) || (f2.method || "GET") + t3, this.cancelRequest(y2), m2 = new AbortController(), this.cancelControllers[y2] = m2, f2.signal = m2.signal), null === (h2 = f2.params) || void 0 === h2 || delete h2.$autoCancel, null === (p2 = f2.params) || void 0 === p2 || delete p2.$cancelKey, b2 = this.buildUrl(t3), void 0 !== f2.params && ((g2 = this.serializeQueryParams(f2.params)) && (b2 += (b2.includes("?") ? "&" : "?") + g2), delete f2.params), this.beforeSend && (f2 = Object.assign({}, this.beforeSend(b2, f2))), [2, fetch(b2, f2).then(function(t4) {
          return i(w2, void 0, void 0, function() {
            var e3;
            return o(this, function(n3) {
              switch (n3.label) {
                case 0:
                  e3 = {}, n3.label = 1;
                case 1:
                  return n3.trys.push([1, 3, , 4]), [4, t4.json()];
                case 2:
                  return e3 = n3.sent(), [3, 4];
                case 3:
                  return n3.sent(), [3, 4];
                case 4:
                  if (this.afterSend && (e3 = this.afterSend(t4, e3)), t4.status >= 400)
                    throw new s({ url: t4.url, status: t4.status, data: e3 });
                  return [2, e3];
              }
            });
          });
        }).catch(function(t4) {
          throw new s(t4);
        })];
      });
    });
  }, t2.prototype.buildUrl = function(t3) {
    var e2 = this.baseUrl + (this.baseUrl.endsWith("/") ? "" : "/");
    return t3 && (e2 += t3.startsWith("/") ? t3.substring(1) : t3), e2;
  }, t2.prototype.serializeQueryParams = function(t3) {
    var e2 = [];
    for (var n2 in t3)
      if (null !== t3[n2]) {
        var i2 = t3[n2], o2 = encodeURIComponent(n2);
        if (Array.isArray(i2))
          for (var r2 = 0, s2 = i2; r2 < s2.length; r2++) {
            var a2 = s2[r2];
            e2.push(o2 + "=" + encodeURIComponent(a2));
          }
        else
          i2 instanceof Date ? e2.push(o2 + "=" + encodeURIComponent(i2.toISOString())) : null !== typeof i2 && "object" == typeof i2 ? e2.push(o2 + "=" + encodeURIComponent(JSON.stringify(i2))) : e2.push(o2 + "=" + encodeURIComponent(i2));
      }
    return e2.join("&");
  }, t2;
}();

// dep:pocketbase
var pocketbase_default = x;
export {
  v as Admin,
  y as BaseAuthStore,
  s as ClientResponseError,
  k as Collection,
  P as ExternalAuth,
  m as LocalAuthStore,
  I as LogRequest,
  p as Record,
  R as SchemaField,
  f as User,
  pocketbase_default as default
};
//# sourceMappingURL=pocketbase.js.map
